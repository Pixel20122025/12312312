<!doctype html>
<html lang="uk">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>LP Visual Solver</title>

<style>
:root{
  --bg:#020617;
  --card:rgba(30,41,59,0.85);
  --border:rgba(148,163,184,0.25);
  --text:#e5e7eb;
  --muted:#94a3b8;
  --accent:#38bdf8;
  --accent-2:#f472b6;
  --success:#22c55e;
  --danger:#ef4444;
}

*{box-sizing:border-box;font-family:Inter,Segoe UI,Roboto,Arial,sans-serif}

body{
  margin:0;
  background:radial-gradient(circle at top,#1e293b,#020617);
  color:var(--text);
  padding:20px;
}

.container{max-width:1150px;margin:auto}

header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:18px;
}

h1{font-size:22px;margin:0}

.row{display:flex;gap:16px}

.col{
  background:var(--card);
  border:1px solid var(--border);
  backdrop-filter:blur(14px);
  padding:16px;
  border-radius:16px;
  box-shadow:0 20px 40px rgba(0,0,0,.4);
}

.left{width:380px}
.right{flex:1}

label{
  display:block;
  font-size:13px;
  color:var(--muted);
  margin-bottom:6px;
}

input, select{
  width:100%;
  background:#020617;
  color:var(--text);
  border:1px solid var(--border);
  border-radius:10px;
  padding:9px 10px;
}

input:focus, select:focus{
  outline:none;
  border-color:var(--accent);
}

hr{border:none;height:1px;background:var(--border);margin:14px 0}

.btn{
  border:none;
  border-radius:10px;
  padding:9px 14px;
  cursor:pointer;
  font-weight:600;
  transition:.2s;
}

.btn.primary{
  background:linear-gradient(135deg,var(--accent),#0ea5e9);
  color:#020617;
}

.btn.primary:hover{opacity:.9}

.btn.ghost{
  background:transparent;
  border:1px solid var(--border);
  color:var(--text);
}

.btn.ghost:hover{background:rgba(255,255,255,.05)}

.constraints{max-height:300px;overflow:auto}

.constraint{
  display:flex;
  gap:6px;
  align-items:center;
  margin-bottom:8px;
}

.constraint input{width:70px}

.constraint .remove{
  background:rgba(239,68,68,.15);
  color:#fecaca;
  border:none;
  border-radius:8px;
  padding:6px;
  cursor:pointer;
}

.constraint .remove:hover{background:rgba(239,68,68,.3)}

.status{margin-top:10px;font-size:14px}

svg{
  width:100%;
  height:600px;
  background:#020617;
  border-radius:16px;
  border:1px solid var(--border);
}

footer{
  margin-top:16px;
  text-align:center;
  font-size:13px;
  color:var(--muted);
}

@media(max-width:900px){
  .row{flex-direction:column}
  .left{width:100%}
}
</style>
</head>

<body>
<div class="container">

<header>
  <h1>LP Visual Solver</h1>
  <div>
    <select id="lang">
      <option value="ua">Українська</option>
      <option value="en">English</option>
    </select>
    <button id="reset" class="btn ghost">Reset</button>
  </div>
</header>

<div class="row">

<div class="col left">
  <label>Цільова функція (Max)</label>
  <div style="display:flex;gap:6px">
    <input id="a" type="number" value="3"/>
    <span>× x₁ +</span>
    <input id="b" type="number" value="2"/>
    <span>× x₂</span>
  </div>

  <label style="margin-top:6px">
    <input id="nonneg" type="checkbox" checked/>
    x₁, x₂ ≥ 0
  </label>

  <hr/>

  <label>Обмеження</label>
  <div class="constraints" id="constraintsList"></div>

  <div style="display:flex;gap:8px">
    <button id="addCons" class="btn primary">+ Додати</button>
    <button id="solve" class="btn" style="background:var(--success);color:#020617">
      Solve
    </button>
  </div>

  <div class="status" id="status"></div>
  <div id="solutionBox" style="margin-top:10px; font-weight:bold; color:var(--accent)"></div>
</div>

<div class="col right">
  <svg id="svg" viewBox="0 0 600 600">
    <line x1="0" y1="599" x2="600" y2="599" stroke="#475569" stroke-width="2"/>
    <line x1="1" y1="0" x2="1" y2="600" stroke="#475569" stroke-width="2"/>
  </svg>
</div>

</div>

<footer>
  Працює офлайн • HTML + JS • Visual LP Solver
</footer>

</div>

<script>
const svg=document.getElementById("svg");
const list=document.getElementById("constraintsList");
const status=document.getElementById("status");
const sol=document.getElementById("solutionBox");
const aInput = document.getElementById("a");
const bInput = document.getElementById("b");

let constraints=[
  {id:1,c:1,d:0,s:6},
  {id:2,c:0,d:1,s:4}
];

function render(){
  list.innerHTML="";
  constraints.forEach(l=>{
    const r=document.createElement("div");
    r.className="constraint";
    r.innerHTML=`
      <input type="number" value="${l.c}" class="inp-c">
      <span>x₁ +</span>
      <input type="number" value="${l.d}" class="inp-d">
      <span>x₂ ≤</span>
      <input type="number" value="${l.s}" class="inp-s">
      <button class="remove">✕</button>`;
    
    r.querySelector(".inp-c").onchange=(e)=>l.c = +e.target.value;
    r.querySelector(".inp-d").onchange=(e)=>l.d = +e.target.value;
    r.querySelector(".inp-s").onchange=(e)=>l.s = +e.target.value;

    r.querySelector(".remove").onclick=()=>{
      constraints=constraints.filter(x=>x!==l);
      render(); draw();
    };
    list.appendChild(r);
  });
}

function feasible(x,y){
  if(document.getElementById("nonneg").checked&&(x<0||y<0))return false;
  return constraints.every(l=>l.c*x+l.d*y<=l.s+1e-6);
}

function solve(){
  status.textContent="";
  sol.innerHTML="";
  let best=null,val=-1e18;
  
  // Простий метод перебору для візуалізації (Brute-force)
  for(let x=0;x<=20;x+=0.1)
    for(let y=0;y<=20;y+=0.1)
      if(feasible(x,y)){
        let v=x*+aInput.value+y*+bInput.value;
        if(v>val){val=v;best={x,y}}
      }
      
  if(!best || val === -1e18){
    status.textContent="Немає рішень";
    return;
  }
  
  status.textContent="Оптимум:";
  sol.innerHTML=`x₁=${best.x.toFixed(2)}<br>x₂=${best.y.toFixed(2)}<br>F=${val.toFixed(2)}`;
  draw(best);
}

function draw(opt){
  // Очищення SVG крім осей
  while(svg.childNodes.length > 4) svg.removeChild(svg.lastChild);
  
  const scale = 30; // Масштаб: 1 одиниця = 30 пікселів

  constraints.forEach(l=>{
    if(l.c === 0 && l.d === 0) return;
    
    const line=document.createElementNS("http://www.w3.org/2000/svg","line");
    let x1, y1, x2, y2;

    if (l.d !== 0 && l.c !== 0) {
      x1 = 0; y1 = l.s / l.d;
      x2 = l.s / l.c; y2 = 0;
    } else if (l.d === 0) {
      x1 = l.s / l.c; y1 = 0;
      x2 = l.s / l.c; y2 = 20;
    } else {
      x1 = 0; y1 = l.s / l.d;
      x2 = 20; y2 = l.s / l.d;
    }

    line.setAttribute("x1", x1 * scale);
    line.setAttribute("y1", 600 - y1 * scale);
    line.setAttribute("x2", x2 * scale);
    line.setAttribute("y2", 600 - y2 * scale);
    line.setAttribute("stroke","#38bdf8");
    line.setAttribute("stroke-width",2);
    svg.appendChild(line);
  });

  if(opt){
    const c=document.createElementNS("http://www.w3.org/2000/svg","circle");
    c.setAttribute("cx",opt.x * scale);
    c.setAttribute("cy",600 - opt.y * scale);
    c.setAttribute("r",6);
    c.setAttribute("fill","#f472b6");
    svg.appendChild(c);
  }
}

document.getElementById("addCons").onclick=()=>{
  constraints.push({id:Date.now(),c:1,d:1,s:5});
  render();
};

document.getElementById("solve").onclick=solve;

document.getElementById("reset").onclick=()=>{
  constraints=[{id:1,c:1,d:0,s:6},{id:2,c:0,d:1,s:4}];
  aInput.value=3;
  bInput.value=2;
  status.textContent="";
  sol.innerHTML="";
  render();
  draw();
};

render();
draw();
</script>

</body>
</html>
